<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="style.css">
    <title>The Site</title>
    <style>
    body::before {
        content: '';
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background-color: rgba(0, 0, 0, 0.5); /* Adjust opacity to dim the background */
        z-index: 0.1;
        pointer-events: none;
        background-image: var(--background-image); /* Use CSS variable for random background */
        background-size: cover;
        background-position: center;
        background-repeat: no-repeat;
    }

    body {
        background-color: black;
        color: white;
        display: grid;
        grid-template-columns: repeat(3, 1fr);
        gap: 20px;
        padding: 20px;
    }

    .playlist-container {
        display: flex;
        flex-direction: column;
        background-color: #222;
        padding: 10px;
        border-radius: 5px;
        z-index: 2
    }

    .content {
        display: none;
        padding-left: 20px;
        position: relative;
        z-index: 2; /* Ensure the content is above the overlay */
    }

    .text {
        background-color: rgba(0, 0, 0, 0.8);
        padding: 20px;
        border-radius: 10px;
        display: inline-block; /* Ensure the background only wraps around the content */
        width: auto; /* Automatically size the background to fit the content */
        margin-bottom: 10px; /* Add some space between text blocks */
        z-index: 2
    }
    .text-2 {
        background-color: rgba(0, 0, 0, 0.8);
        padding: 10px;
        border-radius: 10px;
        display: inline-block; /* Ensure the background only wraps around the content */
        width: auto; /* Automatically size the background to fit the content */
        margin-bottom: 10px; /* Add some space between text blocks */
        z-index: 2
    }

    .collapsible {
        background-color: #444;
        color: white;
        cursor: pointer;
        padding: 18px;
        width: 100%;
        border: none;
        text-align: left;
        outline: none;
        font-size: 15px;
        border-radius: 5px;
    }

    .collapsible:hover {
        background-color: #555;
    }

    .active {
        background-color: #666;
    }

    .playlist {
        list-style-type: none;
        padding: 0;
    }

    .playlist li {
        margin: 5px 0;
    }

    .playlist li a {
        text-decoration: none;
        color: #00f;
    }

    .playlist li a:hover {
        text-decoration: underline;
    }

    audio {
        display: none; /* Hide audio elements initially */
        margin-top: 20px;
    }

    button {
        margin-top: 10px;
        padding: 5px 10px;
        font-size: 16px;
        background-color: #444;
        color: white;
        border: none;
        cursor: pointer;
        border-radius: 5px;
    }

    button:hover {
        background-color: #666;
    }
</style>
<script src="scripts/passwordReturn.js"></script>
    <script>
        document.addEventListener("DOMContentLoaded", function() {
            var audioPlayers = document.querySelectorAll("audio");
            audioPlayers.forEach(function(audioPlayer) {
                audioPlayer.addEventListener("ended", function() {
                    audioPlayer.style.display = "none";
                });
            });

            // Add event listeners to playlist items
            var playlistItems = document.querySelectorAll(".playlist li a");
            playlistItems.forEach(function(item) {
                item.addEventListener("click", function(event) {
                    var playerId = event.target.closest('.playlist-container').querySelector('audio').id;
                    var file = event.target.getAttribute('data-file');
                    playAudio(playerId, file);
                });
            });
        });

        function playAudio(playerId, file) {
            var audioPlayer = document.getElementById(playerId);
            audioPlayer.src = file;
            audioPlayer.style.display = "block"; // Show the audio player
            audioPlayer.play();

            // Hide the audio player when the music stops playing
            audioPlayer.onended = function() {
                audioPlayer.style.display = "none";
            };
        }

        function shufflePlaylist(playlistId, playerId) {
            var playlist = document.getElementById(playlistId);
            var songs = playlist.getElementsByTagName('li');
            var songArray = Array.from(songs);
            shuffleArray(songArray);

            playShuffledSongs(songArray, playerId);
        }

        function shuffleArray(array) {
            for (let i = array.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [array[i], array[j]] = [array[j], array[i]];
            }
        }

        function playShuffledSongs(songs, playerId) {
            if (songs.length === 0) return;

            var audioPlayer = document.getElementById(playerId);
            var currentIndex = 0;

            // Show the audio player before playing the first song
            audioPlayer.style.display = "block";

            audioPlayer.src = songs[currentIndex].querySelector('a').getAttribute('data-file');
            audioPlayer.play();

            audioPlayer.onended = function() {
                currentIndex++;
                if (currentIndex < songs.length) {
                    // Show the audio player before playing the next song
                    audioPlayer.style.display = "block";
                    
                    audioPlayer.src = songs[currentIndex].querySelector('a').getAttribute('data-file');
                    audioPlayer.play();
                } else {
                    audioPlayer.style.display = "none"; // Hide the audio player when all songs are finished
                }
            };
        }
    </script>
</head>
<body>
<div class="text">
<h2>Personal Playlists</h2>
</div>
<h2></h2>
<h2></h2>
    <!-- Playlist 1 -->
    <div class="playlist-container">
        <h2>Austin</h2>
        <a href="austin_playlist.txt" target="_blank" class="collapsible">Show Playlist</a>
        <div class="content">
            <ul class="playlist" id="playlist1">
                <li><a href="javascript:void(0);" data-file="song1.mp3">Song 1</a></li>
                <li><a href="javascript:void(0);" data-file="song2.mp3">Song 2</a></li>
                <li><a href="javascript:void(0);" data-file="song3.mp3">Song 3</a></li>
            </ul>
        </div>
        <button onclick="shufflePlaylist('playlist1', 'audioPlayer1')">Shuffle All</button>
        <audio id="audioPlayer1" controls>
            Your browser does not support the audio element.
        </audio>
    </div>
    <script src="scripts/rbg.js"></script>
    <footer>
    <div class="text-2">
        <a href="/index">Back to Homepage</a>
        </div>
</footer>
</body>
</html>
